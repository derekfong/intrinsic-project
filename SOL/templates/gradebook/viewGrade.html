{% extends "base.html" %}
{% block head %}
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/raphael.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/g.raphael-min.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/g.bar-min.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/g.pie-min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            var r = Raphael("holder"),
				fin = function () 
				{
					this.flag = r.popup(this.bar.x, this.bar.y, this.bar.value || "0").insertBefore(this);
                },
                fout = function () 
				{
                    this.flag.animate({opacity: 0}, 300, function () {this.remove();});
                },
                fin2 = function () 
				{
                    var y = [], res = [];
                    for (var i = this.bars.length; i--;) 
					{
                        y.push(this.bars[i].y);
                        res.push(this.bars[i].value || "0");
                	}
                	this.flag = r.popup(this.bars[0].x, Math.min.apply(Math, y), res.join(", ")).insertBefore(this);
                },
                fout2 = function () 
				{
                    this.flag.animate({opacity: 0}, 300, function () {this.remove();});
                };
            var max_val = 10
			txtattr = {font: "14px Arial", "font-weight": "bold", "fill": "#333333"}
            r.barchart(20, 0, 450, 290, [[
				{{barChart.0}},
				{{barChart.1}},
				{{barChart.2}},
				{{barChart.3}},
				{{barChart.4}},
				{{barChart.5}},
				{{barChart.6}},
				{{barChart.7}},
				{{barChart.8}},
				{{barChart.9}},
				{{barChart.10}}
			]]).hover(fin, fout);
			//r.g.axis(x_start, y_start, x_width, from, to, steps, orientation, labels, type, dashsize)
			axis = Raphael.g.axis(43,290,400,0,100,10,2,
				["0-10", "10-20", "20-30", "30-40", "40-50", "50-60", "60-70", "70-80", "80-90", "90-100", "100+"],
			 	" ", 0, r);
			axis2 = Raphael.g.axis(15,270,250,0,{{ barChart.11 }},{{ barChart.11 }}/2,1, null, "|", 0, r);
			axis.text.attr({font: "10px Arial", "font-weight": "regular", "fill": "#333333"});
        }
    </script>
{% endblock %}

{% block content %}
	{% if accessToStudent %}
		<h2>{{ class.department }} {{class.class_number }} | {{ activity.aid.activity_name }}</h2>
		<h3>Grade Information</h3>
		<table width=450>
			<tr>
				<td>Name: </td><td>{{ activity.aid.activity_name }}</td>
			</tr>
			<tr>
				<td>Due Date: </td><td>{{ activity.aid.due_date }}</td>
			</tr>
			<tr>
				<td>Status: </td><td>
					{% if activity.aid.status == 0 %}
						Due date not passed
					{% else %}
						{% if activity.aid.status == 1 %}
							Due but not marked
						{% else %}
							Marks released
						{% endif %}
					{% endif %}
				</td>
			</tr>
			<tr>
				<td>Worth: </td><td>{{ activity.aid.worth }}%</td>
			</tr>
			<tr>
				<td>Grade: </td><td>{{ activity.mark }}/{{ activity.aid.out_of }} ({{ activity.percent }}%)</td>
			</tr>
		</table>
		<h3>Comments</h3>
		{% if comments.count > 0 %}
			<table width=450>
				{% for comment in comments %}
					<tr>
						<td><strong>{{ comment.description }}:</strong></td>
					</tr>
					<tr>
						<td>{{ comment.comment }}</td>
					</tr>
				{% endfor %}
			</table>
		{% else %}
			<p>There are no comments for this assignment</p>
		{% endif %}
		<h3>Statistics</h3>
		<table width=450>
			<tr>
				<td>Count: </td><td>{{ stats.mark__count }}</td>
			</tr>
			<tr>
				<td>Mean Grade: </td><td>{{ stats.mark__avg }}/{{ activity.aid.out_of }}</td>
			</tr>
			<tr>
				<td>Median: </td><td>{{ median }}/{{ activity.aid.out_of }}</td>
			</tr>
			<tr>
				<td>Standard Deviation:</td><td>{{ stats.mark__stddev }}</td>
			</tr>
			<tr>
				<td>Maximum: </td><td>{{ stats.mark__max }}/{{ activity.aid.out_of }}</td>
			</tr>
			<tr>
				<td>Minimum: </td><td>{{ stats.mark__min }}/{{ activity.aid.out_of }}</td>
			</tr>
		</table>
		<h3>Histogram</h3>
		<div id="holder"></div>
	{% else %}
		<p class="error">You are not enrolled in this class</p>
	{% endif %}
{% endblock %}
