{% extends "base.html" %}
{% block head %}
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/raphael.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/g.raphael-min.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/g.bar-min.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}raphael/g.pie-min.js"></script>
    <script type="text/javascript">
        window.onload = function() {
            // Creates canvas 640 Ã— 480 at 10, 50
            var r = Raphael("holder");
            var max_val = 50
			txtattr = {font: "14px Arial", "font-weight": "bold", "fill": "#333333"}
            //r.text(250, 10, "Grade Information for {{ activity.aid.activity_name }}").attr(txtattr);
            r.barchart(0, 10, 450, 275, [{{ barChart }}]);//.hover(fin, fout);
			axis = Raphael.g.axis(23,285,400,0,100,10,2,["0-10", "10-20", "20-30", "30-40", "40-50", "50-60", "60-70", "70-80", "80-90", "90-100", "100+"], "|", 0, r);
			//axis2 = Raphael.g.axis(40,230,300,0,400,10,1);
			axis.text.attr({font: "10px Arial", "font-weight": "regular", "fill": "#333333"});

        }
    </script>
{% endblock %}

{% block content %}
	{% if accessToStudent %}
		<h2>{{ class.department }} {{class.class_number }} | {{ activity.aid.activity_name }}</h2>
		<h3>Grade Information</h3>
		<table width=400>
			<tr>
				<td>Name: </td><td>{{ activity.aid.activity_name }}</td>
			</tr>
			<tr>
				<td>Due Date: </td><td>{{ activity.aid.due_date }}</td>
			</tr>
			<tr>
				<td>Status: </td><td>
					{% if activity.aid.status == 0 %}
						Due date not passed
					{% else %}
						{% if activity.aid.status == 1 %}
							Due but not marked
						{% else %}
							Marks released
						{% endif %}
					{% endif %}
				</td>
			</tr>
			<tr>
				<td>Worth: </td><td>{{ activity.aid.worth }}%</td>
			</tr>
			<tr>
				<td>Grade: </td><td>{{ activity.mark }}/{{ activity.aid.out_of }} ({{ activity.percent }}%)</td>
			</tr>
		</table>
		<h3>Statistics</h3>
		<table width=400>
			<tr>
				<td>Count: </td><td>{{ stats.mark__count }}</td>
			</tr>
			<tr>
				<td>Mean Grade: </td><td>{{ stats.mark__avg }}/{{ activity.aid.out_of }}</td>
			</tr>
			<tr>
				<td>Median: </td><td>{{ median }}/{{ activity.aid.out_of }}</td>
			</tr>
			<tr>
				<td>Standard Deviation:</td><td>{{ stats.mark__stddev }}</td>
			</tr>
			<tr>
				<td>Maximum: </td><td>{{ stats.mark__max }}/{{ activity.aid.out_of }}</td>
			</tr>
			<tr>
				<td>Minimum: </td><td>{{ stats.mark__min }}/{{ activity.aid.out_of }}</td>
			</tr>
		</table>
		<h3>Histogram</h3>
		<div id="holder"></div>
		{% if comments.count > 0 %}
			<h3>Comments</h3>
			<table width=400>
				{% for comment in comments %}
					<tr>
						<td><strong>{{ comment.description }}:</strong></td>
					</tr>
					<tr>
						<td>{{ comment.comment }}</td>
					</tr>
				{% endfor %}
			</table>
		{% endif %}
	{% else %}
		<p class="error">You are not enrolled in this class</p>
	{% endif %}
{% endblock %}